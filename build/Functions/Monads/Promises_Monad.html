<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta http-equiv="content-security-policy" content=""><title>Async</title>
	<link rel="stylesheet" href="/_app/assets/pages/__layout.svelte-b6adefe3.css">
	<link rel="stylesheet" href="/_app/assets/pages/Functions/__layout.svelte-45d8fac8.css">
	<link rel="stylesheet" href="/_app/assets/pages/Functions/Monads/__layout.svelte-ed3bdd87.css">
	<link rel="stylesheet" href="/_app/assets/pages/Functions/Monads/Promises_Monad.svelte-61b9bbc2.css">
	<link rel="modulepreload" href="/_app/start-b6a591d0.js">
	<link rel="modulepreload" href="/_app/chunks/vendor-7ab9b2a4.js">
	<link rel="modulepreload" href="/_app/pages/__layout.svelte-31f91b2d.js">
	<link rel="modulepreload" href="/_app/pages/Functions/__layout.svelte-c22d6533.js">
	<link rel="modulepreload" href="/_app/pages/Functions/Monads/__layout.svelte-880bf17c.js">
	<link rel="modulepreload" href="/_app/pages/Functions/Monads/Promises_Monad.svelte-0a212882.js">
				<script>
		if ('serviceWorker' in navigator) {
			navigator.serviceWorker.register('/service-worker.js');
		}
	</script>

<script
  src="https://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>

  <script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>

  <script src="https://cdn.socket.io/4.4.0/socket.io.min.js" integrity="sha384-1fOn6VtTq3PWwfsOrk45LnYcGosJwzMHv+Xh/Jx5303FVOXzEnw0EpLv30mtjmlj" crossorigin="anonymous"></script>


	</head>
	
	<body>
		<div id="svelte" >


<div><nav><ul class="svelte-1ofk2mc"><li class="svelte-1ofk2mc"><a href="/">Home</a></li>

    <li class="svelte-1ofk2mc"><a href="/Functions">Functions</a></li>

    <li class="svelte-1ofk2mc"><a href="/Mahjong">Riichi Mahjong</a></li>

    <li class="svelte-1ofk2mc"><a href="/Grammar">Grammar</a></li>

    <li class="svelte-1ofk2mc"><a href="/Law">Rule By Law</a></li></ul></nav></div>


<div></div>
<div class="container svelte-1ofk2mc"><br>
<div style="font-size: 26px">Functions</div>


<nav><ul class="svelte-14w1mcn"><li class="svelte-14w1mcn"><a href="/Functions/" class="svelte-14w1mcn">Home</a></li>

        <li class="svelte-14w1mcn"><a href="/Functions/haskell" class="svelte-14w1mcn">Haskell</a></li>

      	<li class="svelte-14w1mcn"><a href="/Functions/bitmask_prime_generator" class="svelte-14w1mcn">Primes</a></li>

		<li class="svelte-14w1mcn"><a href="/Functions/factors" class="svelte-14w1mcn">Factors</a></li>

		<li class="svelte-14w1mcn"><a href="/Functions/proxy" class="svelte-14w1mcn">Proxies</a></li>

        <li class="svelte-14w1mcn"><a class="large svelte-14w1mcn" href="/Functions/Monads">Monads</a></li>

        <li class="svelte-14w1mcn"><a class="large svelte-14w1mcn" href="/Functions/Binary_Operations">Binary</a></li>

		<li class="svelte-14w1mcn"><a href="/Functions/score" class="svelte-14w1mcn">Score</a></li></ul></nav>


<br>
<div style="font-size: 26px">Monads</div>


<nav><ul class="svelte-1e9oi5x"><li class="svelte-1e9oi5x"><a href="/Functions/Monads/" class="svelte-1e9oi5x">Home</a></li>

      	<li class="svelte-1e9oi5x"><a href="/Functions/Monads/Monad" class="svelte-1e9oi5x">Monads</a></li>

		<li class="svelte-1e9oi5x"><a href="/Functions/Monads/Monad0" class="svelte-1e9oi5x">A Simple Monad</a></li>

		<li class="svelte-1e9oi5x"><a href="/Functions/Monads/ObjectMonad" class="svelte-1e9oi5x">Object Monads</a></li>

        <li class="svelte-1e9oi5x"><a href="/Functions/Monads/Async_monad" class="svelte-1e9oi5x">Async Monad</a></li>

        <li class="svelte-1e9oi5x"><a href="/Functions/Monads/game" class="svelte-1e9oi5x">Score</a></li></ul></nav>




<div style="font-family: Times New Roman; text-align: center; color: yellow; font-size: 38px;">Asynchronous Information Handling
</div>
<br>
<h1>7 and [object Object]</h1>
<p class="svelte-euyywb">Clicking the button below fetches three quasi-random integers from the Haskell WebSockets server which are then sent to a Web Worker. The Worker returns the prime factors of the number. </p> 
<h1>7</h1>
<div>The WebSockets server sent these numbers (now at O.c0, O.c1, and O.c2); </div>
<div style="color:red"></div>

<h1>[object Object]</h1>
<span>Click this:</span>
<br>
<button class="svelte-euyywb">Hello</button>


<p class="svelte-euyywb">In this demonstration, Monad() returns a function run() that returns a function f(). f() takes two arguments and calls run(a,b). run makes the assignment O[a1] = b, O[a2] =b, or O[a3] = b on the global object O, and returns f(). The cycle is repeated whenever f() encounters more arguments.  </p>

<p class="svelte-euyywb">Functions that cause side effects during execution can cause hard-to-find bugs. There is, however, no danger of that occurring here. This module is small, run() is the only function that modifies O, and there are no functions in the script that fetch data from O. O exists for the sole purpose of keeping browser displays refreshed when data arrives from the WebSockets server and the Web Worker. Svelte&#39;s built-in reactivity keeps the HTML page in sync with O.  </p>

<p class="svelte-euyywb">Here&#39;s the definition of &quot;Monad&quot; used in this module:</p>

<p class="svelte-euyywb">Messages are sent to the Haskell WebSockets server requesting pseudo-random numbers between 1 and the integer specified at the end of the request. On the server, randomR from the System.Random library produces a number that is sent to the browser with the prefix &quot;BE#$42&quot;. Messages from the server are parsed in socket.onmessage. If the prefix is &quot;BE#$42&quot;, mon(p) executes, where p is the payload (a number) and mon is defined by &quot;mon = Monad()&quot;. mon sends p to worker_OO, which sends back the prime decomposition of p.</p>
<p class="svelte-euyywb">mon(m) then executes, where m is an array co from the web worker are processed in worker_OO.onmessag
</p><p class="svelte-euyywb">When M === 2 the process is complete. M and N are set to -1 and lock is set to false, allowing another possible call to random() to call rand(). </p>



<br>
<br>
<span>The code for this Svelte application is at </span>
<a href="https://github.com/dschalk/blog/" target="_blank" class="svelte-euyywb">GitHub repository</a></div>


		<script type="module" data-hydrate="9fwsmd">
		import { start } from "/_app/start-b6a591d0.js";
		start({
			target: document.querySelector('[data-hydrate="9fwsmd"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/_app/pages/__layout.svelte-31f91b2d.js"),
						import("/_app/pages/Functions/__layout.svelte-c22d6533.js"),
						import("/_app/pages/Functions/Monads/__layout.svelte-880bf17c.js"),
						import("/_app/pages/Functions/Monads/Promises_Monad.svelte-0a212882.js")
				],
				params: {}
			}
		});
	</script></div>
	</body>
</html>
